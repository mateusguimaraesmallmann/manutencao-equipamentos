<app-navbar-funcionario style="position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;"></app-navbar-funcionario>

<div class="page">
  <div class="filters card-like">
    <div class="titles">
      <div class="title bold">Solicitações Abertas</div>
      <div class="subtitle">Priorize as solicitações que ainda não possuem orçamento</div>
    </div>

    <div class="meta-right">
      <mat-icon aria-hidden="true">assignment</mat-icon>
      <span>{{ data?.length || 0 }}</span>
    </div>
  </div>

  <p-table
    [value]="data"
    [paginator]="true"
    [rows]="5"
    [responsiveLayout]="'scroll'"
    [tableStyle]="{ 'min-width': '880px' }"
    styleClass="w-100 shadow-sm radius-md">

    <ng-template pTemplate="header">
      <tr>
        <th style="min-width:140px">Data/Hora</th>
        <th>Cliente</th>
		<th>Descrição do produto</th>
        <th style="min-width:140px">Estado</th>
        <th style="min-width:260px">Ações</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-s>
      <tr>
        <td>{{ s.createdAt | date:'dd/MM/yyyy HH:mm' }}</td>
		<td>{{ s.clienteNome }}</td>
        <td>{{ desc30(s.descricaoProduto) }}</td>
        <td>{{ s.estado }}</td>
        <td class="acao-wrap">
          <button *ngIf="s.estado === Estado.ABERTA"
                    mat-flat-button color="primary"
                    class="btn-acao"
                    (click)="abrirOrcamento(s)">
              <mat-icon>build</mat-icon>
              Efetuar Orçamento
            </button>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="4">
          <div class="sem-dados">
            Nenhuma solicitação encontrada para o filtro aplicado.
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>