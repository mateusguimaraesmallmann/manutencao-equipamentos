<!--<app-navbar-cliente></app-navbar-cliente> -->

<div class="solicitacao-container" [class.submitting]="isSubmitting">
  <mat-card class="solicitacao-card">
    <mat-card-title>Solicitação de Manutenção</mat-card-title>
    <mat-card-subtitle>Preencha os dados abaixo para abrir seu chamado</mat-card-subtitle>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
        <div class="grid">
          <!-- Equipamento -->
          <mat-form-field appearance="fill" class="col-12">
            <mat-label>Descrição do Equipamento</mat-label>
            <input matInput formControlName="equipamento" maxlength="100" placeholder="Ex.: Impressora HP LaserJet 1020">
            <mat-hint align="end">{{ form.get('equipamento')?.value?.length || 0 }}/100</mat-hint>
            <mat-error *ngIf="form.get('equipamento')?.hasError('required')">Obrigatório.</mat-error>
          </mat-form-field>

          <!-- Categoria -->
          <mat-form-field appearance="fill" class="col-12">
            <mat-label>Categoria</mat-label>
            <mat-select formControlName="categoria" required>
              <mat-option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('categoria')?.hasError('required')">Obrigatório.</mat-error>
          </mat-form-field>

          <!-- Descrição do Defeito -->
          <mat-form-field appearance="fill" class="col-12">
            <mat-label>Descrição do Defeito</mat-label>
            <textarea matInput rows="5" formControlName="defeito" maxlength="1000"
                      placeholder="Descreva o problema com detalhes"></textarea>
            <mat-hint align="end">{{ form.get('defeito')?.value?.length || 0 }}/1000</mat-hint>
            <mat-error *ngIf="form.get('defeito')?.hasError('required')">Obrigatório.</mat-error>
          </mat-form-field>
        </div>

        <div class="botoes">
          <button mat-button type="button" (click)="voltar()">Voltar</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid || isSubmitting">
            Enviar Solicitação
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

