<mat-card *ngIf="solicitacao; else notFound">
    <mat-card-title>Detalhe da Solicitação</mat-card-title>
    <mat-card-subtitle>ID: {{ solicitacao.id }}</mat-card-subtitle>
  
    <div class="grid">
      <div>
        <h4>Informações</h4>
        <p><b>Abertura:</b> {{ solicitacao.createdAt | date:'dd/MM/yyyy HH:mm' }}</p>
        <p><b>Cliente:</b> {{ solicitacao.clienteNome }}</p>
        <p><b>E-mail:</b> {{ solicitacao.clienteEmail }}</p>
        <p><b>Equipamento:</b> {{ solicitacao.descricaoProduto }}</p>
        <p *ngIf="solicitacao.defeito"><b>Defeito:</b> {{ solicitacao.defeito }}</p>
        <p><b>Estado atual:</b> {{ solicitacao.estado }}</p>
      </div>
  
      <div>
        <h4>Orçamento</h4>
        <div class="orcamento" *ngIf="solicitacao.orcamentoValor != null; else semOrcamento">
          <span class="valor">R$ {{ solicitacao.orcamentoValor | number:'1.2-2' }}</span>
        </div>
        <ng-template #semOrcamento>
          <span class="sem-orcamento">Aguardando orçamento da empresa…</span>
        </ng-template>
      </div>
    </div>
  
    <mat-divider class="my-3"></mat-divider>
  
    <h4>Histórico</h4>
    <table mat-table [dataSource]="solicitacao.historico || []" class="mat-elevation-z1 w-100">
      <ng-container matColumnDef="quando">
        <th mat-header-cell *matHeaderCellDef> Data/Hora </th>
        <td mat-cell *matCellDef="let h">{{ h.quando | date:'dd/MM/yyyy HH:mm' }}</td>
      </ng-container>
  
      <ng-container matColumnDef="de">
        <th mat-header-cell *matHeaderCellDef> De </th>
        <td mat-cell *matCellDef="let h">{{ h.de }}</td>
      </ng-container>
  
      <ng-container matColumnDef="para">
        <th mat-header-cell *matHeaderCellDef> Para </th>
        <td mat-cell *matCellDef="let h">{{ h.para }}</td>
      </ng-container>
  
      <ng-container matColumnDef="funcionario">
        <th mat-header-cell *matHeaderCellDef> Funcionário </th>
        <td mat-cell *matCellDef="let h">{{ h.funcionario || '—' }}</td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-divider class="my-3"></mat-divider>
  
    <div class="actions">
      <button mat-stroked-button type="button" (click)="voltar()">Voltar</button>
      
      <!--
      <ng-container *ngIf="podeAprovarOuRejeitar()">
        <button mat-raised-button color="primary" type="button" (click)="aprovar()">Aprovar Serviço</button>
        <button mat-raised-button color="warn" type="button" (click)="rejeitar()">Rejeitar Serviço</button>
      </ng-container>
  
      <ng-container *ngIf="podeResgatar()">
        <button mat-raised-button color="accent" type="button" (click)="resgatar()">Resgatar Serviço</button>
      </ng-container>
  
      <ng-container *ngIf="podePagar()">
        <button mat-raised-button color="primary" type="button" (click)="pagar()">Pagar Serviço</button>
      </ng-container>-->
    </div>
  </mat-card>
  
  <ng-template #notFound>
    <mat-card>
      <mat-card-title>Solicitação não encontrada</mat-card-title>
      <button mat-button (click)="voltar()">Voltar</button>
    </mat-card>
  </ng-template>
  
